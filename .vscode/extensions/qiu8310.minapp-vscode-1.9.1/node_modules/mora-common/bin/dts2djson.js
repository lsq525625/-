#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var path = require("path");
var fs = require("fs");
var _1 = require("../helper/");
var cli = require("mora-scripts/libs/tty/cli");
var mkdirp = require("mora-scripts/libs/fs/mkdirp");
cli({
    usage: 'dts2djson <index.d.ts/index.ts/index.tsx>'
})
    .options({
    'ni|naAnalyzeImport': '<boolean> 不分析 import 的变量',
    'o|outFile': '<string> 指定 json 输出的文件，不指定会输出到命令行'
})
    .parse(function (res) {
    if (res._.length !== 1)
        return this.error('一次只能处理一个文件');
    var data = JSON.stringify(_1.dts2djson(res._[0], {
        disableAnalyzeImport: res.naAnalyzeImport
    }), null, 2);
    if (res.outFile) {
        var outFile = path.resolve(res.outFile);
        mkdirp(path.dirname(outFile));
        fs.writeFileSync(outFile, data);
    }
    else {
        console.log(data);
    }
});
