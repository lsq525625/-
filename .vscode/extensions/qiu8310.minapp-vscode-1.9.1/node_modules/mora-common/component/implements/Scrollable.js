"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var applyMixins_1 = require("../../util/applyMixins");
var warn_1 = require("../../util/warn");
var Scrollable = /** @class */ (function (_super) {
    tslib_1.__extends(Scrollable, _super);
    function Scrollable() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * 在继承的子类添加上
     *
     * ```
     * scrollTop: number
     * ```
     *
     * 就可以用它去获取或设置页面的 scrollTop
     */
    Scrollable.apply = function () {
        var base = {
            getScrollableContainer: function () {
                return document.documentElement;
            },
            get scrollTop() {
                var container = this.getScrollableContainer();
                if (!container) {
                    warn_1.warn('没有 container，无法获取滚动位置');
                    return 0;
                }
                // 某些移动端滚动使用的是 body，桌面端使用的是 html
                return container.scrollTop || (container === document.documentElement && document.body.scrollTop) || 0;
            },
            set scrollTop(value) {
                var container = this.getScrollableContainer();
                if (!container) {
                    warn_1.warn('没有 container，无法滚动到指定的位置');
                    return;
                }
                // 某些移动端滚动使用的是 body，桌面端使用的是 html
                container.scrollTop = value;
                if (container === document.documentElement)
                    document.body.scrollTop = value;
            }
        };
        return function (Ctor) { return applyMixins_1.applyMixins(Ctor, [Scrollable, base]); };
    };
    return Scrollable;
}(React.PureComponent));
exports.Scrollable = Scrollable;
